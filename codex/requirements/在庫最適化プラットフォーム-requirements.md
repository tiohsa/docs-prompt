# 在庫最適化プラットフォーム 要件定義書

## 1. 概要
### 1.1 プロジェクト概要
- 名称: 在庫最適化プラットフォーム
- ドメイン: 製造業の物流・在庫管理
- 目的: 需要予測と在庫最適化を組み合わせ、過剰在庫を抑制しつつ必要な在庫水準を維持できる仕組みを整備する。

### 1.2 背景・課題
- 現状の在庫は部門ごとに分散管理されており、全社最適ができていない。
- 需要変動に即した補充計画が立てられず、過剰在庫が発生している。
- データ活用の基盤が不十分で、分析が属人化している。

### 1.3 成果物の利用者
- 物流部門担当者: 日々の在庫状況モニタリングと発注案の承認。
- 情報システム部門: プラットフォーム運用、既存システム連携の担当。
- 経営層: 在庫指標ダッシュボードの参照、投資対効果確認。

## 2. ステークホルダー
| 区分 | 役割 | 主な関心事 |
| --- | --- | --- |
| 物流部門担当者 | オペレーション責任者 | 需要予測の精度、発注案の使いやすさ、既存業務との親和性 |
| 情シス | システム運用 | 技術スタック、セキュリティ、既存システムとの連携方法 |
| 経営層 | 意思決定者 | 在庫圧縮効果、ROI、導入スケジュール |

## 3. スコープ
### 3.1 対象範囲
- 在庫データの収集・集約 (社内システムからの取り込み、整形、履歴保持)
- 需要予測アルゴリズムの実行 (商品×拠点単位の予測)
- 在庫発注案・補充案の提示 (優先度・理由を含む)
- 利用者向けダッシュボード (在庫KPI表示、予測精度指標)

### 3.2 非スコープ / 今回扱わない範囲
- 物理的な倉庫管理システム (WMS) の更改
- 需要予測モデルの研究開発 (高度なAI研究は別プロジェクト)
- 既存ERPの改修範囲外の業務プロセス刷新
- サプライヤとのEDI連携 (TBD: 対象かどうか要確認)

## 4. ユースケース概要
1. 物流担当者が日次で最新在庫データを確認し、発注案を承認する。
2. アルゴリズムが週次で需要予測を再計算し、閾値を超えたSKUを通知する。
3. 経営層が月次の在庫水準ダッシュボードを確認し、指示を出す。

## 5. 機能要件
### 5.1 データ収集・集約
- 社内の生産・販売・在庫システムからデータを取り込み、共通データモデルに統合する。
- データ品質検査 (欠損値、異常値) を自動実行し、結果をレポート化する。
- データ更新頻度: 最低でも日次バッチ。リアルタイム要求は未確定 (TBD)。

### 5.2 需要予測
- 過去実績、季節性、キャンペーン情報等を入力に統計/機械学習モデルを実行する。
- 予測単位: SKU × 拠点。期間: 週次 12 週間先 (TBD: 実際の期間要確認)。
- 予測結果の信頼区間を提示し、精度指標 (MAPE等) を可視化する。

### 5.3 在庫最適化・発注案提示
- 需要予測結果と安全在庫ルールを基に、自動で補充量とタイミングを算出する。
- 発注案の優先順位付け (欠品リスク、在庫コスト) と承認ワークフローを提供する。
- 発注案の変更履歴を保存し、監査証跡を残す。

### 5.4 ユーザーインターフェース
- Webベースのダッシュボード (TypeScriptフロントエンド) を提供し、検索・フィルタリングをサポート。
- KPI表示: 在庫回転率、滞留在庫、欠品リスクなど。
- 通知機能: 異常在庫や計画逸脱時にアラートを配信 (メール/Teams連携は要検討)。

### 5.5 監視・ログ
- 主要バッチ処理の実行状況と失敗アラートを Azure Monitor で監視。
- 予測モデルのバージョン管理、精度劣化アラートをロギングする。

## 6. 非機能要件
| 区分 | 要件 |
| --- | --- |
| 可用性 | 99.9%以上 (年間ダウンタイム ~8.8時間以内) |
| 性能 | 95% のリクエスト応答時間 3 秒以内 (ダッシュボード表示時) |
| スケーラビリティ | 月間SKU件数・ユーザー増加に応じて水平スケールできる設計 (Azure PaaS活用)。 |
| セキュリティ | Azure AD による認証、ロールベースアクセス制御。データ暗号化 (at rest/in transit)。詳細は TBD。 |
| 運用性 | アプリ/ジョブの監視テンプレート化、失敗時アラートを 5 分以内に通知。 |
| 保守性 | C# (API層) / TypeScript (UI) / PostgreSQL (DB) のコーディング規約に準拠し、CI/CD で品質担保。 |

## 7. 制約条件
- 納期: 2026年3月リリース。
- 技術スタック指定: C#, TypeScript, PostgreSQL, Azure。
- データは国内リージョン内で保管する (仮定)。
- 予算・要員は未確定 (TBD: 経営層判断待ち)。

## 8. データ要件
- 取り込み対象 (例): 生産実績、販売実績、在庫残高、マスタデータ (品目、拠点)。
- データ保持期間: 過去 3 年分以上を分析用に保管 (仮置き)。
- データ粒度・レイテンシは業務要件に応じて再定義が必要 (TBD)。

## 9. 運用・サポート
- 役割分担: 情シスが一次運用、物流部門が業務利用。夜間バッチ監視の担当は未定 (TBD)。
- 障害対応フロー: Azure Monitor → 情シス → 開発ベンダーの二次対応を想定。
- バックアップ: PostgreSQL の PITR、Blob ストレージへの日次スナップショット。

## 10. リスクと対策方向性
| リスク | 影響 | 対策方針 |
| --- | --- | --- |
| データ品質が低く予測精度が出ない | 発注案の信頼性低下 | データクレンジングルール整備、品質指標モニタリング |
| モデルのメンテナンスが追いつかない | 精度劣化、改善に時間がかかる | MLOps パイプライン構築、モデル更新手順の明文化 |
| 既存システムとの連携仕様が不明確 | 連携遅延、スケジュール遅延 | 早期にIF定義ワークショップを実施、PoCで疎通確認 |
| 部門間でKPI優先度が異なる | 意思決定停滞 | ステークホルダーレビューでKPI合意形成セッションを設定 |

## 11. 前提条件
- 必要な在庫・販売データを関係部門が提供する。
- Azure上に共通基盤 (ネットワーク、監視、ID連携) が整備済みである。
- 情シスがCI/CD・運用ツールを管理する。
- 物流業務プロセスの大枠は現状踏襲とし、大規模見直しは別プロジェクトで検討する。

## 12. 未確定事項
- データ連携方法 (ETL/ストリーム) と更新頻度。
- 需要予測モデルの種類、評価指標、再学習サイクル。
- ダッシュボードの詳細要件 (表示項目、フィルター、権限粒度)。
- 利用者数、アクセスピーク時刻、同時接続数。
- 運用体制 (一次/二次サポート、SLA) と予算。

## 13. 要確認事項・質問リスト
1. 在庫・販売・生産データの正式な提供元システムと連携インターフェースは何か？
2. 需要予測の対象SKU・拠点の範囲、予測期間・更新頻度はどこまで必要か？
3. 発注案の承認フローや権限 (誰が承認/差戻しできるか) は現行業務と一致させるのか？
4. ダッシュボードに表示すべきKPI・アラート条件はどれか、経営層が必要とする粒度は？
5. システムの利用者数・同時アクセス数の想定値は？ (性能・ライセンス見積もりに必要)
6. 既存ERPやWMSとの双方向連携が必要か？必要な場合はタイミングとデータ項目は？
7. セキュリティ要件 (監査ログ、IP制限、データマスキング) の詳細は？
8. 運用・保守体制の責任分担 (情シス vs ベンダー)、SLA/サポート時間帯は？
9. 納期に向けた主要マイルストーン (要件定義完了、開発完了、UAT) の合意はあるか？
10. データ保持方針や法令・業界規制 (個人情報、輸出管理等) への準拠要否は？
